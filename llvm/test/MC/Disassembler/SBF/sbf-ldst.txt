# RUN: llvm-mc --disassemble %s -triple=sbf-solana-solana \
# RUN:                          | FileCheck %s --check-prefix=CHECK-NEW
# RUN: llvm-mc --disassemble %s -triple=sbf-solana-solana -mattr=+alu32 \
# RUN:                          | FileCheck %s --check-prefix=CHECK32-NEW

# TODO: Test immediate field ranges and some hex immediates.

# CHECK-NEW: lddw r7, 32768
# CHECK-NEW: lddw r0, 9151314442816847872
# CHECK-NEW: lddw r1, -1
0x18,0x07,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7f
0x18,0x01,0x00,0x00,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0xff



# CHECK-NEW: ldxb r6, [r1 + 17]
# CHECK-NEW: ldxb r1, [r10 - 3]
# CHECK-NEW: ldxh r8, [r2 + 32]
# CHECK-NEW: ldxw r4, [r3 + 64]
# CHECK-NEW: ldxdw r0, [r4 + 128]
0x71,0x16,0x11,0x00,0x00,0x00,0x00,0x00
0x71,0xa1,0xfd,0xff,0x00,0x00,0x00,0x00
0x69,0x28,0x20,0x00,0x00,0x00,0x00,0x00
0x61,0x34,0x40,0x00,0x00,0x00,0x00,0x00
0x79,0x40,0x80,0x00,0x00,0x00,0x00,0x00



# CHECK32-NEW: ldxb w6, [r1 + 17]
# CHECK32-NEW: ldxb w1, [r10 - 3]
# CHECK32-NEW: ldxh w8, [r2 + 32]
# CHECK32-NEW: ldxw w4, [r3 + 64]
0x71,0x16,0x11,0x00,0x00,0x00,0x00,0x00
0x71,0xa1,0xfd,0xff,0x00,0x00,0x00,0x00
0x69,0x28,0x20,0x00,0x00,0x00,0x00,0x00
0x61,0x34,0x40,0x00,0x00,0x00,0x00,0x00



# CHECK-NEW: stxb [r1 + 17], r6
# CHECK-NEW: stxb [r10 - 3], r1
# CHECK-NEW: stxh [r2 + 32], r8
# CHECK-NEW: stxw [r3 + 64], r4
# CHECK-NEW: stxdw [r4 + 128], r0
0x73,0x61,0x11,0x00,0x00,0x00,0x00,0x00
0x73,0x1a,0xfd,0xff,0x00,0x00,0x00,0x00
0x6b,0x82,0x20,0x00,0x00,0x00,0x00,0x00
0x63,0x43,0x40,0x00,0x00,0x00,0x00,0x00
0x7b,0x04,0x80,0x00,0x00,0x00,0x00,0x00



# CHECK32-NEW: stxb [r1 + 17], w6
# CHECK32-NEW: stxb [r10 - 3], w1
# CHECK32-NEW: stxh [r2 + 32], w8
# CHECK32-NEW: stxw [r3 + 64], w4
0x73,0x61,0x11,0x00,0x00,0x00,0x00,0x00
0x73,0x1a,0xfd,0xff,0x00,0x00,0x00,0x00
0x6b,0x82,0x20,0x00,0x00,0x00,0x00,0x00
0x63,0x43,0x40,0x00,0x00,0x00,0x00,0x00


# XADDW (NoALU32).
# CHECK-NEW: stxxaddw [r8 + 4], r2 
0xc3,0x28,0x04,0x00,0x00,0x00,0x00,0x00



# XADDD, XANDD, XORD, XXORD (NoALU32).
# CHECK-NEW: stxxadddw [r8 - 16], r0
# CHECK-NEW: stxxanddw [r8 - 32], r1
# CHECK-NEW: stxxordw [r8 - 64], r2
# CHECK-NEW: stxxxordw [r8 - 128], r3
0xdb,0x08,0xf0,0xff,0x00,0x00,0x00,0x00
0xdb,0x18,0xe0,0xff,0x50,0x00,0x00,0x00
0xdb,0x28,0xc0,0xff,0x40,0x00,0x00,0x00
0xdb,0x38,0x80,0xff,0xa0,0x00,0x00,0x00



# XADDW32, XANDW32, XORW32, XXORW32 (ALU32).
# CHECK32-NEW: stxxaddw [r8 - 16], w4
# CHECK32-NEW: stxxandw [r8 - 32], w5
# CHECK32-NEW: stxxorw [r8 - 64], w6
# CHECK32-NEW: stxxxorw [r8 - 128], w7
0xc3,0x48,0xf0,0xff,0x00,0x00,0x00,0x00
0xc3,0x58,0xe0,0xff,0x50,0x00,0x00,0x00
0xc3,0x68,0xc0,0xff,0x40,0x00,0x00,0x00
0xc3,0x78,0x80,0xff,0xa0,0x00,0x00,0x00



# XFADDD, XFANDD, XFORD, XFXORD (NoALU32).
# CHECK-NEW: stxxfadddw [r8 - 16], r0
# CHECK-NEW: stxxfanddw [r8 - 32], r1
# CHECK-NEW: stxxfordw [r8 - 64], r2
# CHECK-NEW: stxxfxordw [r8 - 128], r3
0xdb,0x08,0xf0,0xff,0x01,0x00,0x00,0x00
0xdb,0x18,0xe0,0xff,0x51,0x00,0x00,0x00
0xdb,0x28,0xc0,0xff,0x41,0x00,0x00,0x00
0xdb,0x38,0x80,0xff,0xa1,0x00,0x00,0x00



# XFADDW32, XFANDW32, XFORW32, XFXORW32 (ALU32).
# CHECK32-NEW: stxxfaddw [r8 - 16], w0
# CHECK32-NEW: stxxfandw [r8 - 32], w1
# CHECK32-NEW: stxxforw [r8 - 64], w2
# CHECK32-NEW: stxxfxorw [r8 - 128], w3
0xc3,0x08,0xf0,0xff,0x01,0x00,0x00,0x00
0xc3,0x18,0xe0,0xff,0x51,0x00,0x00,0x00
0xc3,0x28,0xc0,0xff,0x41,0x00,0x00,0x00
0xc3,0x38,0x80,0xff,0xa1,0x00,0x00,0x00



# XCHGD, XCHGW32
# CHECK-NEW: stxxchgdw [r8 - 16], r7
# CHECK32-NEW: stxxchgw [r8 - 16], w0
0xdb,0x78,0xf0,0xff,0xe1,0x00,0x00,0x00
0xc3,0x08,0xf0,0xff,0xe1,0x00,0x00,0x00



# CMPXCHGD, CMPXCHGW32
# CHECK-NEW: stxcmpxchgdw [r8 - 16], r5
# CHECK32-NEW: stxcmpxchgw [r8 - 16], w5
0xdb,0x58,0xf0,0xff,0xf1,0x00,0x00,0x00
0xc3,0x58,0xf0,0xff,0xf1,0x00,0x00,0x00


