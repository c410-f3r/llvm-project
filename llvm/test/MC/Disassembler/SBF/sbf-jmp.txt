# RUN: llvm-mc --disassemble %s -triple=sbf-solana-solana \
# RUN:                          | FileCheck %s --check-prefix=CHECK-NEW

# TODO: Test immediate field ranges.

# TODO: Note that the negative immediates on the unsigned comparisons 
# below (e.g., jgt) should probably render as large unsigned values. For now,
# this is the same behavior as the old BPF back-end.


# CHECK-NEW: ja +8
# CHECK-OLD: goto +8
0x05,0x00,0x08,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq r0, r9, +1
# CHECK-NEW: jne r0, r9, +1
# CHECK-NEW: jgt r0, r9, +1
# CHECK-NEW: jge r0, r9, +1
# CHECK-NEW: jlt r0, r9, +1
# CHECK-NEW: jle r0, r9, +1
# CHECK-NEW: jsgt r0, r9, +1
# CHECK-NEW: jsge r0, r9, +1
# CHECK-NEW: jslt r0, r9, +1
# CHECK-NEW: jsle r0, r9, +1
0x1d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x5d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x2d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x3d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xad,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xbd,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x6d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x7d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xcd,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xdd,0x90,0x01,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq r3, r2, +1
# CHECK-NEW: jne r3, r2, +1
# CHECK-NEW: jgt r3, r2, +1
# CHECK-NEW: jge r3, r2, +1
# CHECK-NEW: jlt r3, r2, +1
# CHECK-NEW: jle r3, r2, +1
# CHECK-NEW: jsgt r3, r2, +1
# CHECK-NEW: jsge r3, r2, +1
# CHECK-NEW: jslt r3, r2, +1
# CHECK-NEW: jsle r3, r2, +1
0x1d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x5d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x2d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x3d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xad,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xbd,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x6d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x7d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xcd,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xdd,0x23,0x01,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq r3, 123, +8
# CHECK-NEW: jne r3, 123, +8
# CHECK-NEW: jgt r3, 123, +8
# CHECK-NEW: jge r3, 123, +8
# CHECK-NEW: jlt r3, 123, +8
# CHECK-NEW: jle r3, 123, +8
# CHECK-NEW: jsgt r3, 123, +8
# CHECK-NEW: jsge r3, 123, +8
# CHECK-NEW: jslt r3, 123, +8
# CHECK-NEW: jsle r3, 123, +8
0x15,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x55,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x25,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x35,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xa5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xb5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x65,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x75,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xc5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xd5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00

# CHECK-NEW: jeq r5, -123, +8 
# CHECK-NEW: jne r5, -123, +8 
# CHECK-NEW: jgt r5, -123, +8 
# CHECK-NEW: jge r5, -123, +8 
# CHECK-NEW: jlt r5, -123, +8 
# CHECK-NEW: jle r5, -123, +8 
# CHECK-NEW: jsgt r5, -123, +8 
# CHECK-NEW: jsge r5, -123, +8 
# CHECK-NEW: jslt r5, -123, +8 
# CHECK-NEW: jsle r5, -123, +8 
0x15,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x55,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x25,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x35,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xa5,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xb5,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x65,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x75,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xc5,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xd5,0x05,0x08,0x00,0x85,0xff,0xff,0xff


# CHECK-NEW: call 8
0x85,0x00,0x00,0x00,0x08,0x00,0x00,0x00

# CHECK-NEW: callx r4
0x8d,0x00,0x00,0x00,0x04,0x00,0x00,0x00

# CHECK-NEW: call -1
0x85,0x10,0x00,0x00,0xff,0xff,0xff,0xff

# CHECK-NEW: exit
0x95,0x00,0x00,0x00,0x00,0x00,0x00,0x00
